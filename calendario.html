<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calendario con Fotos</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>ðŸ“… Calendario</h1>
<div id="mes-container"></div>
<a href="si.html">â¬… Volver</a>

<script>
const mesNombres = ["Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
const diasPorMes = [31,30,31,30,31]; // de agosto a diciembre

const container = document.getElementById('mes-container');

for(let m=0;m<mesNombres.length;m++){
    const mesDiv = document.createElement('div');
    mesDiv.className = 'mes';
    mesDiv.innerHTML = `<h2>${mesNombres[m]}</h2>`;
    for(let d=1;d<=diasPorMes[m];d++){
        const td = document.createElement('div');
        td.className = 'dia';
        td.textContent = d;

        // Click para subir foto
        td.onclick = function() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const formData = new FormData();
                formData.append('foto', file);

                fetch('/upload', { method:'POST', body: formData })
                .then(res => res.json())
                .then(data => {
                    const img = document.createElement('img');
                    img.src = 'uploads/' + data.filename;
                    td.innerHTML = d;
                    td.appendChild(img);
                });
            }
            input.click();
        }

        mesDiv.appendChild(td);
    }
    container.appendChild(mesDiv);
}
</script>
</body>
</html>
