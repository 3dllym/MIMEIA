<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calendario de Amor ‚ù§Ô∏è</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    .calendario {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      max-width: 600px;
      margin: auto;
    }
    .dia {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 10px;
      position: relative;
    }
    .dia img {
      max-width: 100%;
      margin-top: 5px;
      border-radius: 8px;
    }
    .subir {
      margin-top: 10px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>üìÖ Nuestro Calendario de Recuerdos üìÖ</h1>
  <div class="calendario" id="calendario"></div>

  <script>
    const calendario = document.getElementById("calendario");

    // Crear 30 d√≠as como ejemplo
    for (let i = 1; i <= 30; i++) {
      const div = document.createElement("div");
      div.classList.add("dia");
      div.innerHTML = `
        <strong>${i}</strong>
        <form class="form-subir">
          <input type="file" name="foto" class="subir">
          <button type="submit">Subir</button>
        </form>
        <div class="preview"></div>
      `;

      // Manejar subida
      const form = div.querySelector(".form-subir");
      const preview = div.querySelector(".preview");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const archivo = form.querySelector("input[type=file]").files[0];
        if (!archivo) return alert("Elige una foto");

        const data = new FormData();
        data.append("foto", archivo);

        const res = await fetch("http://localhost:3000/upload", {
          method: "POST",
          body: data
        });

        const result = await res.json();
        preview.innerHTML = `<img src="${result.url}" alt="Foto">`;
      });

      calendario.appendChild(div);
    }
  </script>
</body>
</html>
